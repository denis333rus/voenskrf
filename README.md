# Сайт ГВСУ СК России

Официальный сайт Главного военного следственного управления Следственного комитета Российской Федерации.

## Возможности

- **Главная страница** с новостями и информацией
- **Регистрация пользователей** - система регистрации для военнослужащих
- **Личный кабинет пользователя** - просмотр дел и информации
- **Админ панель** для управления:
  - Новостями (создание, удаление)
  - Пользователями (просмотр зарегистрированных)
  - Сотрудниками (добавление, удаление)
  - Делами (создание, назначение ответственных, управление статусами)

## Установка и запуск

### Локальная разработка

#### Требования
- Python 3.11 или выше
- Flask

#### Установка зависимостей

```bash
pip install -r requirements.txt
```

#### Запуск приложения

```bash
python app.py
```

Приложение будет доступно по адресу: http://localhost:5000

### Развертывание на Railway

#### Быстрый старт

1. **Установите Railway CLI** (опционально):
   ```bash
   npm i -g @railway/cli
   ```

2. **Создайте проект на Railway:**
   - Перейдите на [railway.app](https://railway.app)
   - Войдите через GitHub
   - Нажмите "New Project"
   - Выберите "Deploy from GitHub repo"
   - Выберите ваш репозиторий

3. **Настройте переменные окружения:**
   В настройках проекта добавьте:
   - `SECRET_KEY` - случайный секретный ключ (сгенерируйте: `python -c "import secrets; print(secrets.token_hex(32))"`)
   - `FLASK_ENV=production` (опционально)

4. **Railway автоматически:**
   - Обнаружит Python проект
   - Установит зависимости из `requirements.txt`
   - Запустит приложение используя `Procfile`

#### Важные замечания для Railway

- **База данных**: Приложение использует SQLite. База данных будет создаваться автоматически при первом запуске.
- **Хранилище**: В Railway SQLite файлы сохраняются в эфемерной файловой системе. Для production рекомендуется использовать PostgreSQL или другую managed БД.
- **Порт**: Railway автоматически устанавливает переменную `PORT` - приложение настроено на её использование.
- **Секретный ключ**: Обязательно установите `SECRET_KEY` в переменных окружения Railway для безопасности.

## Структура базы данных

При первом запуске автоматически создается база данных SQLite (`gvsu.db`) с таблицами:

- `news` - новости
- `users` - зарегистрированные пользователи
- `employees` - сотрудники управления
- `cases` - дела
- `protocols` - протоколы к делам
- `admins` - администраторы

## Доступ

### Админ панель
- **Логин:** admin
- **Пароль:** admin123
- Вход: http://localhost:5000/admin/login

### Пользовательская система
- Регистрация: http://localhost:5000/register
- Вход: http://localhost:5000/user/login

## Структура проекта

```
saitskrfvoeb/
├── app.py                          # Flask приложение
├── gvsu.db                         # База данных (создается автоматически)
├── static/
│   └── logo .png                   # Логотип организации
├── templates/
│   ├── base.html                   # Главная страница
│   ├── register.html               # Регистрация пользователей
│   ├── user/
│   │   ├── login.html              # Вход для пользователей
│   │   └── dashboard.html          # Личный кабинет пользователя
│   └── admin/
│       ├── login.html              # Вход в админ панель
│       ├── dashboard.html          # Главная страница админ панели
│       ├── news.html               # Управление новостями
│       ├── users.html              # Просмотр пользователей
│       ├── employees.html          # Управление сотрудниками
│       └── cases.html              # Управление делами
├── requirements.txt                # Зависимости проекта
└── README.md                       # Документация
```

## Основные маршруты

### Публичные
- `/` - главная страница
- `/register` - регистрация пользователя
- `/user/login` - вход пользователя
- `/user/dashboard` - личный кабинет пользователя
- `/user/logout` - выход пользователя

### Админ
- `/admin/login` - вход в админ панель
- `/admin/logout` - выход
- `/admin/dashboard` - главная страница админ панели
- `/admin/news` - управление новостями
- `/admin/users` - просмотр пользователей
- `/admin/employees` - управление сотрудниками
- `/admin/cases` - управление делами

## Функционал

### Для пользователей
1. Регистрация с указанием ФИО, логина, пароля, звания, опыта и образования
2. Вход в систему
3. Просмотр всех дел в личном кабинете
4. Информация о назначенных делах

### Для администраторов
1. Управление новостями (создание, удаление)
2. Просмотр зарегистрированных пользователей
3. Управление сотрудниками
4. Управление делами:
   - Создание новых дел
   - Назначение ответственных сотрудников
   - Установка статусов (открыто, в работе, закрыто)
   - Удаление дел

## Безопасность

⚠️ **Важно:** Для production использования необходимо:
- Изменить секретный ключ в `app.py`
- Использовать хеширование паролей (например, bcrypt)
- Настроить HTTPS
- Реализовать более надежную систему авторизации
- Добавить защиту от SQL-инъекций (используйте параметризованные запросы)

## Разработка

Сайт создан на основе оригинального дизайна https://gvsu.gov.ru с дополнительным функционалом для управления контентом, пользователями и делами.

## Лицензия

© 2025 Главное военное следственное управление СК России. Все права защищены.
