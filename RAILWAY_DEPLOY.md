# Инструкция по развертыванию на Railway

## Быстрое развертывание

### Вариант 1: Через веб-интерфейс

1. Зайдите на [railway.app](https://railway.app)
2. Войдите через GitHub
3. Нажмите "New Project" → "Deploy from GitHub repo"
4. Выберите ваш репозиторий
5. Railway автоматически определит Python проект и начнет развертывание

### Вариант 2: Через Railway CLI

```bash
# Установите Railway CLI
npm i -g @railway/cli

# Войдите в Railway
railway login

# Инициализируйте проект
railway init

# Разверните
railway up
```

## Настройка переменных окружения

После создания проекта на Railway:

1. Перейдите в настройки проекта (Settings)
2. Откройте раздел "Variables"
3. Добавьте следующие переменные:

```
SECRET_KEY=<сгенерируйте случайный ключ>
FLASK_ENV=production
```

**Генерация SECRET_KEY:**
```bash
python -c "import secrets; print(secrets.token_hex(32))"
```

## Что происходит автоматически

Railway автоматически:
- ✅ Определяет Python проект
- ✅ Устанавливает зависимости из `requirements.txt`
- ✅ Использует `Procfile` для запуска
- ✅ Устанавливает переменную `PORT`
- ✅ Настраивает HTTPS

## Первый запуск

После развертывания:
1. Приложение создаст базу данных SQLite при первом запуске
2. Будет создан дефолтный админ:
   - Логин: `admin`
   - Пароль: `admin123`
3. **Важно**: Сразу измените пароль админа в настройках!

## Получение URL

Railway автоматически генерирует URL вида:
`https://your-project-name.railway.app`

Вы можете настроить собственный домен в настройках проекта.

## Мониторинг

- Логи доступны в разделе "Deployments"
- Метрики в разделе "Metrics"
- Переменные окружения в разделе "Variables"

## Проблемы и решения

### Приложение не запускается
- Проверьте логи в Railway Dashboard
- Убедитесь, что все переменные окружения установлены
- Проверьте, что `requirements.txt` корректен

### База данных сбрасывается
- SQLite файлы в Railway хранятся в эфемерной файловой системе
- Для production рекомендуется использовать PostgreSQL
- Railway предоставляет managed PostgreSQL в разделе "Data"

### Ошибка "Port already in use"
- Railway автоматически устанавливает PORT, убедитесь что в коде используется `os.environ.get('PORT')`

## Обновление приложения

При push в репозиторий Railway автоматически:
1. Обнаружит изменения
2. Пересоберет приложение
3. Перезапустит сервис

Можно также обновить вручную через CLI:
```bash
railway up
```

